#!/usr/bin/env bash

# This script is meant to work with hyprland and caelestia

img_path=$1

# (trick lá») override caelestia wallpaper path
echo $img_path >~/.local/state/caelestia/wallpaper/path.txt

xpos=$(shuf -i 0-$(hyprctl monitors | grep -m1 -oP '^\s*\K\d+x\d+' | tr 'x' ',' | cut -d',' -f1) -n 1)
ypos=$(shuf -i 0-$(hyprctl monitors | grep -m1 -oP '^\s*\K\d+x\d+' | tr 'x' ',' | cut -d',' -f2) -n 1)

swww img $img_path --transition-type grow --transition-fps 120 --transition-pos $xpos,$ypos
